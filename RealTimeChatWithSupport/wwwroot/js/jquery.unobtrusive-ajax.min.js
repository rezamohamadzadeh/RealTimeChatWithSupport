!function(t){function a(t,a){for(var e=window,n=(t||"").split(".");e&&n.length;)e=e[n.shift()];return"function"==typeof e?e:(a.push(t),Function.constructor.apply(null,a))}function e(t){return"GET"===t||"POST"===t}function n(t,a){e(a)||t.setRequestHeader("X-HTTP-Method-Override",a)}function r(a,e,n){var r;-1===n.indexOf("application/x-javascript")&&(r=(a.getAttribute("data-ajax-mode")||"").toUpperCase(),t(a.getAttribute("data-ajax-update")).each(function(a,n){var i;switch(r){case"BEFORE":i=n.firstChild,t("<div />").html(e).contents().each(function(){n.insertBefore(this,i)});break;case"AFTER":t("<div />").html(e).contents().each(function(){n.appendChild(this)});break;case"REPLACE-WITH":t(n).replaceWith(e);break;default:t(n).html(e)}}))}function i(i,u){var o,c,s,d;if(o=i.getAttribute("data-ajax-confirm"),!o||window.confirm(o)){c=t(i.getAttribute("data-ajax-loading")),d=parseInt(i.getAttribute("data-ajax-loading-duration"),10)||0,t.extend(u,{type:i.getAttribute("data-ajax-method")||void 0,url:i.getAttribute("data-ajax-url")||void 0,cache:"true"===(i.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(t){var e;return n(t,s),e=a(i.getAttribute("data-ajax-begin"),["xhr"]).apply(i,arguments),e!==!1&&c.show(d),e},complete:function(){c.hide(d),a(i.getAttribute("data-ajax-complete"),["xhr","status"]).apply(i,arguments)},success:function(t,e,n){r(i,t,n.getResponseHeader("Content-Type")||"text/html"),a(i.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(i,arguments)},error:function(){a(i.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(i,arguments)}}),u.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),s=u.type.toUpperCase(),e(s)||(u.type="POST",u.data.push({name:"X-HTTP-Method-Override",value:s}));var p=t(i);if(p.is("form")&&"multipart/form-data"==p.attr("enctype")){var f=new FormData;t.each(u.data,function(t,a){f.append(a.name,a.value)}),t("input[type=file]",p).each(function(){var a=this;t.each(a.files,function(t,e){f.append(a.name,e)})}),t.extend(u,{processData:!1,contentType:!1,data:f})}t.ajax(u)}}function u(a){var e=t(a).data(s);return!e||!e.validate||e.validate()}var o="unobtrusiveAjaxClick",c="unobtrusiveAjaxClickTarget",s="unobtrusiveValidation";t(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),i(this,{url:this.href,type:"GET",data:[]})}),t(document).on("click","form[data-ajax=true] input[type=image]",function(a){var e=a.target.name,n=t(a.target),r=t(n.parents("form")[0]),i=n.offset();r.data(o,[{name:e+".x",value:Math.round(a.pageX-i.left)},{name:e+".y",value:Math.round(a.pageY-i.top)}]),setTimeout(function(){r.removeData(o)},0)}),t(document).on("click","form[data-ajax=true] :submit",function(a){var e=a.currentTarget.name,n=t(a.target),r=t(n.parents("form")[0]);r.data(o,e?[{name:e,value:a.currentTarget.value}]:[]),r.data(c,n),setTimeout(function(){r.removeData(o),r.removeData(c)},0)}),t(document).on("submit","form[data-ajax=true]",function(a){var e=t(this).data(o)||[],n=t(this).data(c),r=n&&n.hasClass("cancel");a.preventDefault(),(r||u(this))&&i(this,{url:this.action,type:this.method||"GET",data:e.concat(t(this).serializeArray())})})}(jQuery);